<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Looping — Manifesto</title>
  <style>
    :root{--bg1:#ff9a9e;--bg2:#fad0c4;--bg3:#a18cd1;--bg4:#fbc2eb;--accent:#0f172a}
    html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial; color:var(--accent)}
    /* layered, slow-moving gradient to feel like an endless field */
    /* flat background: subtle, no depth or heavy motion */
    body{display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,#fbfcfe,#f3f6fb);}

    .wrap{width:min(980px,94vw);padding:3.2rem 2rem;display:flex;flex-direction:column;gap:2rem;border-radius:6px}
    /* very flat panel: subtle border, no shadows or blur */
    .panel{background:#ffffff;padding:1.6rem;border-radius:6px;border:1px solid #e7ecf3}

    .hero{display:flex;flex-direction:column;gap:.6rem}
    .title{font-size:clamp(28px,6vw,48px);line-height:1.02;font-weight:700;margin:0;color:#081029}

    .sub{font-size:clamp(12px,2.2vw,16px);opacity:.78;margin:0}
    .sub .ellipsis{display:inline-block;min-width:5ch;opacity:.9}

    .gallery{display:flex;gap:14px;align-items:center}
    .tile{flex:1;min-height:96px;border-radius:8px;overflow:hidden;display:flex;align-items:center;justify-content:center;background:transparent;position:relative;border:1px solid #eef3f8}
    .tile svg{width:100%;height:100%;display:block}
    .tile .label{position:absolute;left:10px;bottom:8px;font-size:11px;background:transparent;padding:4px 8px;color:#5b6b7a}

    footer{font-size:12px;opacity:.72;text-align:center}

    /* keep micro-motion but very subtle for a flat aesthetic */
    .osc{animation:float linear infinite}
    .tile:nth-child(1) .osc{animation-duration:9.9s}
    .tile:nth-child(2) .osc{animation-duration:11.3s;animation-delay:0.4s}
    .tile:nth-child(3) .osc{animation-duration:10.7s;animation-delay:1.1s}
    @keyframes float{0%{transform:translateY(0)}50%{transform:translateY(-3px)}100%{transform:translateY(0)}}

    /* flat tile outline */
    .tile::before{content:"";position:absolute;inset:0;border-radius:8px;border:1px solid rgba(12,24,40,0.02);pointer-events:none}

    /* give a restless, never-resolving underline */
    .title .trail{display:inline-block;margin-left:.4ch;color:rgba(8,16,41,0.6)}

    /* accessibility: respect user motion */
    @media (prefers-reduced-motion:reduce){*{animation:none!important}}
  </style>
</head>
<body>
  <main class="wrap panel" role="main">
    <section class="hero">
      <h1 class="title">It continues, slightly unfinished.</h1>
      <p class="sub">A simple, looping interface — a space that keeps a small gap open.</p>
    </section>

    <section class="gallery">
      <a class="tile" data-id="1" data-side="true" href="#/wip/1" aria-label="Open work in progress image 1">
        <svg id="svg1" viewBox="0 0 300 160" preserveAspectRatio="xMidYMid slice" class="osc">
          <defs>
            <linearGradient id="g1" x1="0" x2="1"><stop offset="0" stop-color="#ff9a9e"/><stop offset="1" stop-color="#fbc2eb"/></linearGradient>
          </defs>
          <rect width="300" height="160" fill="url(#g1)"/>
          <g fill="#fff" fill-opacity="0.14">
            <circle cx="60" cy="100" r="50" />
            <circle cx="220" cy="50" r="30" />
          </g>
          <g fill="none" stroke="#081029" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" opacity="0.06">
            <path d="M10 20 C 60 10, 120 40, 170 30 S 270 40, 290 20" />
            <path d="M10 140 C 80 120, 150 140, 290 110" />
          </g>
        </svg>
        <div class="label">WIP — Loop Study</div>
      </a>

      <a class="tile" data-id="2" data-side="true" href="#/wip/2" aria-label="Open work in progress image 2">
        <svg id="svg2" viewBox="0 0 300 160" preserveAspectRatio="xMidYMid slice" class="osc" style="animation-delay:0.4s">
          <defs>
            <linearGradient id="g2" x1="0" x2="1"><stop offset="0" stop-color="#a18cd1"/><stop offset="1" stop-color="#fad0c4"/></linearGradient>
            <filter id="grain"><feTurbulence baseFrequency="0.9" numOctaves="1" result="t"/><feColorMatrix type="saturate" values="0"/></filter>
          </defs>
          <rect width="300" height="160" fill="url(#g2)"/>
          <g transform="translate(0,12)" opacity="0.12">
            <rect x="36" y="12" width="228" height="120" rx="18" fill="#fff" />
          </g>
          <g fill="#081029" fill-opacity="0.06">
            <circle cx="75" cy="48" r="22" />
            <rect x="180" y="78" width="76" height="28" rx="6" />
          </g>
        </svg>
        <div class="label">WIP — Interface Sketch</div>
      </a>

      <a class="tile" data-id="3" data-side="true" href="#/wip/3" aria-label="Open work in progress image 3">
        <svg id="svg3" viewBox="0 0 300 160" preserveAspectRatio="xMidYMid slice" class="osc" style="animation-delay:1.1s">
          <defs>
            <linearGradient id="g3" x1="0" x2="1"><stop offset="0" stop-color="#ffd3a5"/><stop offset="1" stop-color="#fd6585"/></linearGradient>
          </defs>
          <rect width="300" height="160" fill="url(#g3)"/>
          <g fill="#fff" fill-opacity="0.1">
            <path d="M30 110c30-60 120-60 200-6"/>
            <circle cx="40" cy="40" r="18"/>
          </g>
          <g fill-opacity="0.07" fill="#081029">
            <rect x="110" y="28" width="78" height="18" rx="6"/>
            <rect x="40" y="118" width="220" height="6" rx="3"/>
          </g>
        </svg>
        <div class="label">WIP — Glitch Frame</div>
      </a>
    </section>

    <!-- in-site page viewer (single-file route via hash) -->
    <div id="page" class="page" hidden aria-hidden="true">
      <div class="page-backdrop" data-close></div>
      <div class="page-frame" role="document">
        <a class="page-back" href="#" aria-label="Back">← back</a>
        <div id="page-content" class="page-content" tabindex="0"></div>
        <div class="page-caption" id="page-caption"></div>
      </div>
    </div>

    <footer>
      <small>Manifesto-inspired interface — intentionally leaving space.</small>
    </footer>
  </main>

  <style>
    /* viewer styles (kept in-page for single-file deliverable) */
    /* page viewer used when opening full-screen; keep flat colors */
    .page{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:1400}
    .page-backdrop{position:absolute;inset:0;background:rgba(2,6,23,0.48)}
    .page-frame{position:relative;max-width:94vw;max-height:92vh;padding:18px;display:flex;flex-direction:column;gap:12px;align-items:center}
    .page-content{background:transparent;border-radius:6px;overflow:auto;display:flex;align-items:center;justify-content:center}
    .page-content svg{border-radius:6px;display:block;width:100%;height:auto}
    .page-caption{color:#081029;font-size:13px;opacity:0.9}
    .page-back{position:absolute;left:18px;top:18px;color:#081029;background:transparent;padding:6px 10px;border-radius:6px;text-decoration:none;border:1px solid #e7ecf3}

    /* side tab: small flat drawer */
    .side{position:fixed;right:0;top:0;height:100vh;width:340px;background:#ffffff;border-left:1px solid #e7ecf3;transform:translateX(100%);transition:transform .28s ease;z-index:1500;display:flex;flex-direction:column}
    .side.open{transform:translateX(0)}
    .side-header{padding:12px 14px;border-bottom:1px solid #f1f5f9;display:flex;align-items:center;justify-content:space-between}
    .side-title{font-weight:600;color:#081029}
    .side-close{background:transparent;border:0;padding:8px;color:#5b6b7a}
    .side-body{padding:12px 14px;overflow:auto;flex:1}
    .side-body svg{width:100%;height:auto;display:block}
  </style>
  <script>
    // tiny theme nudge: shift background colors slowly for variety
    (function(){
      const body = document.body;
      let t=0;
      function tick(){
        t+=0.0018;
        const a = Math.sin(t)*0.5+0.5; // 0..1
        const b = Math.cos(t*0.73)*0.5+0.5;
        body.style.setProperty('--bg1', `hsl(${200 + a*60} 85% 75%)`);
        body.style.setProperty('--bg3', `hsl(${260 + b*40} 60% 70%)`);
        requestAnimationFrame(tick);
      }
      if(window.matchMedia('(prefers-reduced-motion: no-preference)').matches){requestAnimationFrame(tick)}
    })();

    // make the headline feel unfinished: jittering dots and random trailing marks
    (function(){
      const title = document.querySelector('.title');
      if(!title) return;
      const base = title.textContent.trim().replace(/[.\s…,]+$/,'');
      title.dataset.base = base;

      function restless(){
        // create a small, never-stable suffix
        const r = Math.random();
        let suffix = '';
        if(r < 0.35) suffix = Array(1 + Math.floor(Math.random()*6)).fill('.').join('');
        else if(r < 0.65) suffix = r > 0.5 ? ',' : '…';
        else suffix = (Math.random()>.5) ? ',…' : '….';
        title.textContent = base + (Math.random()>0.2 ? suffix : suffix + ' ');
      }

      // vary interval so it never feels like a fixed loop
      (function loop(){
        restless();
        const next = 380 + Math.floor(Math.random()*900);
        setTimeout(loop, next);
      })();
    })();

    // small, continuous micro-movements on svg shapes to avoid neat repetition
    (function(){
      const svgs = document.querySelectorAll('.tile svg g');
      svgs.forEach((g,i)=>{
        const dur = 4500 + i*1300 + Math.floor(Math.random()*1800);
        g.style.transition = `transform ${dur}ms cubic-bezier(.22,.9,.36,1)`;
        (function nudge(){
          const tx = (Math.random()-0.5)*6;
          const ty = (Math.random()-0.5)*6;
          const rot = (Math.random()-0.5)*1.6;
          g.style.transform = `translate(${tx}px,${ty}px) rotate(${rot}deg)`;
          setTimeout(nudge, dur + Math.floor(Math.random()*1200));
        })();
      });
    })();
    // in-site page routing: use hash (#/wip/1) to open a full-screen page or side tab for tiles
    (function(){
      const page = document.getElementById('page');
      const content = document.getElementById('page-content');
      const caption = document.getElementById('page-caption');
      const side = createSide();

      function createSide(){
        const s = document.createElement('aside');
        s.id = 'side'; s.className = 'side'; s.setAttribute('aria-hidden','true');
        s.innerHTML = `
          <div class="side-header"><div class="side-title" id="side-title"></div><button class="side-close" id="side-close">✕</button></div>
          <div class="side-body" id="side-body"></div>
        `;
        document.body.appendChild(s);
        s.querySelector('#side-close').addEventListener('click', ()=> { closeSide(); history.replaceState(null,'', location.pathname + location.search + '#'); });
        return s;
      }

      function openSide(id){
        const tile = document.querySelector(`.tile[data-id="${id}"]`);
        if(!tile) return;
        const svg = tile.querySelector('svg');
        const label = tile.querySelector('.label')?.textContent || '';
        const body = document.getElementById('side-body');
        const title = document.getElementById('side-title');
        body.innerHTML = '';
        const clone = svg.cloneNode(true);
        clone.removeAttribute('preserveAspectRatio');
        clone.setAttribute('preserveAspectRatio','xMidYMid meet');
        clone.style.width = '100%';
        clone.style.height = 'auto';
        body.appendChild(clone);
        title.textContent = label;
        side.classList.add('open');
        side.setAttribute('aria-hidden','false');
        document.body.style.overflow = 'hidden';
      }

      function closeSide(){
        side.classList.remove('open');
        side.setAttribute('aria-hidden','true');
        document.getElementById('side-body').innerHTML = '';
        document.body.style.overflow = '';
      }

      function showPage(id){
        const tile = document.querySelector(`.tile[data-id="${id}"]`);
        if(!tile) return hidePage();
        const svg = tile.querySelector('svg');
        const label = tile.querySelector('.label')?.textContent || '';
        content.innerHTML = '';
        const clone = svg.cloneNode(true);
        clone.removeAttribute('preserveAspectRatio');
        clone.setAttribute('preserveAspectRatio','xMidYMid meet');
        clone.style.maxWidth = '92vw';
        clone.style.maxHeight = '78vh';
        content.appendChild(clone);
        caption.textContent = label + ' — experimental / work-in-progress';
        page.hidden = false;
        page.setAttribute('aria-hidden','false');
        document.body.style.overflow = 'hidden';
      }

      function hidePage(){
        page.hidden = true;
        page.setAttribute('aria-hidden','true');
        content.innerHTML = '';
        caption.textContent = '';
        document.body.style.overflow = '';
      }

      function route(){
        const h = location.hash || '';
        const m = h.match(/^#\/wip\/(\d+)/);
        if(m){
          const id = m[1];
          const tile = document.querySelector(`.tile[data-id="${id}"]`);
          if(tile && tile.dataset.side === 'true'){
            openSide(id);
            // keep hash in URL for linkability
          } else {
            showPage(id);
          }
        } else {
          hidePage();
          closeSide();
        }
      }

      // close when clicking backdrop or back link
      document.querySelectorAll('[data-close]').forEach(n=>n.addEventListener('click', ()=> location.hash = ''));
      document.querySelectorAll('.page-back').forEach(n=>n.addEventListener('click', ()=> setTimeout(()=>{ location.hash = '' },10) ));

      // intercept tile clicks to open side immediately (prevents navigation jump)
      document.querySelectorAll('.tile').forEach(tile =>{
        tile.addEventListener('click', (ev)=>{
          const id = tile.dataset.id;
          if(tile.dataset.side === 'true'){
            ev.preventDefault();
            // update hash for shareability
            location.hash = `/wip/${id}`;
            // route handler will open the side
          }
        });
      });

      window.addEventListener('hashchange', route);
      // init
      route();
    })();
  </script>
</body>
</html>
